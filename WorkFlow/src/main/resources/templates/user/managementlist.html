<!DOCTYPE html>
<html xmlns="http://www.thymeleaf.org" xmlns:layout="http://www.ultrap.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/layout}">

<head>
	<title>ユーザー管理</title>
</head>

<body>
	<div layout:fragment="content">
		<div style="margin-top: 20px;">
			<div class="header border-bottom mb-4">
				<h1 class="h2">社員一覧</h1>
			</div>
			
			<!-- 検索フォーム -->
			<div class="card shadow-sm mb-4" style="padding: 20px;">
				<form method="get" th:action="@{/usermanagement/userlist}" class="d-flex align-items-end gap-3 flex-wrap">
					<div class="form-group mb-0">
						<label for="departmentId" class="form-label">部署</label>
						<select name="departmentId" id="departmentId" class="form-control">
							<option value="">全ての部署</option>
							<option value="1" th:selected="${departmentId == 1}">人事部</option>
							<option value="2" th:selected="${departmentId == 2}">IT部</option>
							<option value="3" th:selected="${departmentId == 3}">営業部</option>
						</select>
					</div>
					<button type="submit" class="btn btn-primary text-nowrap">絞り込む</button>
					
					<div class="form-group mb-0">
						<label for="email" class="form-label">ユーザーID</label>
						<input type="text" class="form-control" id="email" name="email" th:value="${email}" />
					</div>
					<button class="btn btn-primary text-nowrap" type="submit">検索</button>
				</form>
			</div>
			
			<!-- テーブル -->
			<div class="card shadow-sm mb-4">
				<div class="card-body">
					<table class="table table-striped table-bordered table-hover mb-0">
						<thead class="table-dark">
							<tr>
								<th>ユーザーID</th>
								<th>ユーザー名</th>
								<th>所属</th>
								<th class="text-center">操作</th>
							</tr>
						</thead>
						<tbody>
							<tr th:each="item: ${getList}">
								<td th:text="${item.email}"></td>
								<td th:text="${item.name}"></td>
								<td th:text="${item.departmentName}"></td>
								<td class="align-middle">
									<div class="d-flex gap-2 justify-content-center">
										<a class="btn btn-outline-primary btn-sm" th:href="@{'/user/detail/' + ${item.email}}">編集</a>
										<a class="btn btn-outline-primary btn-sm" th:href="@{'/attendancemanagement/history/' + ${item.email}}">確認</a>
									</div>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
			
			<!--ユーザー登録-->
			<div class="text-center">
				<a class="btn btn-success" th:href="@{/usermanagement/signup}">ユーザーを登録する</a>
			</div>
		</div>
	</div>

</body>

</html>